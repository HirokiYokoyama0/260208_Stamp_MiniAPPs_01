# 90_ã‚¹ã‚¿ãƒ³ãƒ—å±¥æ­´è¡¨ç¤ºæ”¹å–„ä»•æ§˜

**ä½œæˆæ—¥:** 2026-02-26
**å¯¾è±¡:** AdultStampPage.tsx ã®æ¥é™¢å±¥æ­´è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯
**ç›®çš„:** ã€ŒXXå›ç›®ã®æ¥é™¢ã€ã‹ã‚‰ã€Œã‚¹ã‚¿ãƒ³ãƒ—ç²å¾—ãƒ­ã‚°ã€ã¸ã®è¡¨ç¤ºå¤‰æ›´

---

## ğŸ“‹ ç›®æ¬¡

1. [ç¾çŠ¶ã®å•é¡Œç‚¹](#1-ç¾çŠ¶ã®å•é¡Œç‚¹)
2. [æ–°ã—ã„è¡¨ç¤ºæ–¹é‡](#2-æ–°ã—ã„è¡¨ç¤ºæ–¹é‡)
3. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ç¢ºèª](#3-ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ç¢ºèª)
4. [ç”»é¢è¡¨ç¤ºè¨­è¨ˆ](#4-ç”»é¢è¡¨ç¤ºè¨­è¨ˆ)
5. [å®Ÿè£…æ–¹é‡](#5-å®Ÿè£…æ–¹é‡)
6. [å…·ä½“çš„ãªå®Ÿè£…ä¾‹](#6-å…·ä½“çš„ãªå®Ÿè£…ä¾‹)

---

## 1. ç¾çŠ¶ã®å•é¡Œç‚¹

### 1.1 ç¾åœ¨ã®è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯

**AdultStampPage.tsx (180-208è¡Œç›®):**
```typescript
{stampHistory.map((record, index) => {
  const visitNumber = stampHistory.length - index; // è¨ªå•å›æ•°ï¼ˆæœ€æ–°ãŒ1ç•ªç›®ï¼‰
  const { fullStamps: recordStamps } = calculateStampDisplay(record.stamp_number);
  return (
    <li key={record.id}>
      <p>{visitNumber}å›ç›®ã®æ¥é™¢</p>  // â† ã“ã“ãŒå•é¡Œ
      <p>{formatStampDate(record.visit_date)} â€¢ ã‚¹ã‚¿ãƒ³ãƒ— {recordStamps}å€‹</p>
    </li>
  );
})}
```

### 1.2 å•é¡Œç‚¹

**ç¾çŠ¶:**
- ã™ã¹ã¦ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ã€ŒXXå›ç›®ã®æ¥é™¢ã€ã¨è¡¨ç¤º
- `stamp_method`ã«é–¢ä¿‚ãªãã€Œæ¥é™¢ã€æ‰±ã„
- ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå ±é…¬ã‚‚ã€Œæ¥é™¢ã€ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã†

**ä¾‹:**
```
8å›ç›®ã®æ¥é™¢
2026å¹´2æœˆ26æ—¥ 22:41 â€¢ ã‚¹ã‚¿ãƒ³ãƒ— 53å€‹

7å›ç›®ã®æ¥é™¢  â† ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå ±é…¬ãªã®ã«ã€Œæ¥é™¢ã€ã¨è¡¨ç¤º
2026å¹´2æœˆ26æ—¥ 22:12 â€¢ ã‚¹ã‚¿ãƒ³ãƒ— 50å€‹
```

### 1.3 æ ¹æœ¬åŸå› 

- `stamp_history`ã¯ã™ã¹ã¦ã®ã‚¹ã‚¿ãƒ³ãƒ—å–å¾—å±¥æ­´ã‚’å«ã‚€
- `stamp_method`ã¯ `'qr_scan'`, `'manual_admin'`, `'import'`, `'survey_reward'` ã®4ç¨®é¡
- ç¾åœ¨ã®è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã¯`stamp_method`ã‚’è€ƒæ…®ã—ã¦ã„ãªã„

---

## 2. æ–°ã—ã„è¡¨ç¤ºæ–¹é‡

### 2.1 åŸºæœ¬ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

**ã€Œæ¥é™¢ã€ã§ã¯ãªãã€Œã‚¹ã‚¿ãƒ³ãƒ—ç²å¾—ãƒ­ã‚°ã€ã¨ã—ã¦è¡¨ç¤º**

- **ãƒ¡ã‚¤ãƒ³æƒ…å ±**: ã‚¹ã‚¿ãƒ³ãƒ—ç²å¾—æ•°ï¼ˆä»Šå›+åˆè¨ˆï¼‰
- **ã‚µãƒ–æƒ…å ±**: ç²å¾—ç†ç”±ï¼ˆæ¥é™¢ã€ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå ±é…¬ï¼‰

### 2.2 è¡¨ç¤ºå†…å®¹ã®å„ªå…ˆé †ä½

| å„ªå…ˆåº¦ | è¡¨ç¤ºå†…å®¹ | èª¬æ˜ |
|-------|---------|------|
| **1** | ä»Šå›ç²å¾—ã—ãŸã‚¹ã‚¿ãƒ³ãƒ—æ•° | `amount`ï¼ˆä¾‹: +10å€‹ã€+30å€‹ï¼‰ |
| **2** | åˆè¨ˆã‚¹ã‚¿ãƒ³ãƒ—æ•° | `stamp_number`ï¼ˆä¾‹: 53å€‹ï¼‰ |
| **3** | ç²å¾—ç†ç”± | `stamp_method`ï¼ˆæ¥é™¢ã€ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå ±é…¬ï¼‰ |
| 4 | æ—¥æ™‚ | `visit_date` |

### 2.3 è¡¨ç¤ºä¾‹ï¼ˆæ–°ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰

```
+10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 53å€‹ï¼‰
æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰
2026å¹´2æœˆ26æ—¥ 22:41

+30å€‹ç²å¾—ï¼ˆåˆè¨ˆ 50å€‹ï¼‰
ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬
2026å¹´2æœˆ26æ—¥ 22:12

+10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 20å€‹ï¼‰
æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰
2026å¹´2æœˆ26æ—¥ 10:01
```

---

## 3. ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ç¢ºèª

### 3.1 stamp_history ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | ä¾‹ |
|---------|---|------|---|
| `id` | UUID | ãƒ¬ã‚³ãƒ¼ãƒ‰ID | - |
| `user_id` | TEXT | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | - |
| `visit_date` | TIMESTAMPTZ | æ—¥æ™‚ | 2026-02-26 22:41:00 |
| `stamp_number` | INTEGER | ç´¯ç©ã‚¹ã‚¿ãƒ³ãƒ—æ•° | 53 |
| **`stamp_method`** | TEXT | å–å¾—æ–¹æ³• | `'qr_scan'`, `'manual_admin'`, `'import'`, `'survey_reward'` |
| **`amount`** | INTEGER | ä»Šå›ç²å¾—æ•° | 10, 30, 50 |
| `notes` | TEXT | å‚™è€ƒ | "ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”: satisfaction_2026Q1" |
| `created_at` | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ | - |

### 3.2 stamp_method ã®ç¨®é¡

| å€¤ | æ„å‘³ | è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆ |
|----|------|------------|
| `qr_scan` | QRã‚³ãƒ¼ãƒ‰èª­ã¿å–ã‚Š | ã€Œæ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰ã€ |
| `manual_admin` | ã‚¹ã‚¿ãƒƒãƒ•æ‰‹å‹•æ“ä½œ | ã€Œã‚¹ã‚¿ãƒƒãƒ•æ“ä½œã€ |
| `import` | ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ | ã€Œãƒ‡ãƒ¼ã‚¿ç§»è¡Œã€ |
| `survey_reward` | ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬ | ã€Œã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬ã€ |

### 3.3 amount ã®å€¤

| stamp_method | amount ã®å€¤ | èª¬æ˜ |
|-------------|------------|------|
| `qr_scan` | 10ï¼ˆé€šå¸¸ï¼‰ã€5ã€œ50ï¼ˆç‰¹åˆ¥QRï¼‰ | QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰å–å¾— |
| `survey_reward` | 30ï¼ˆç¾åœ¨ã®è¨­å®šï¼‰ | surveysãƒ†ãƒ¼ãƒ–ãƒ«ã®`reward_stamps`ã‹ã‚‰å–å¾— |
| `manual_admin` | å·®åˆ†å€¤ | ã‚¹ã‚¿ãƒƒãƒ•ãŒè¨­å®šã—ãŸå€¤ - å‰ã®å€¤ |
| `import` | ä»»æ„ | ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®å€¤ |

---

## 4. ç”»é¢è¡¨ç¤ºè¨­è¨ˆ

### 4.1 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¥é™¢å±¥æ­´                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ¯] +10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 53å€‹ï¼‰                        â”‚
â”‚      æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰                               â”‚
â”‚      2026å¹´2æœˆ26æ—¥ 22:41                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“] +30å€‹ç²å¾—ï¼ˆåˆè¨ˆ 50å€‹ï¼‰                        â”‚
â”‚      ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬                             â”‚
â”‚      2026å¹´2æœˆ26æ—¥ 22:12                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ‘¤] +10å€‹èª¿æ•´ï¼ˆåˆè¨ˆ 20å€‹ï¼‰                        â”‚
â”‚      ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œ                                  â”‚
â”‚      2026å¹´2æœˆ24æ—¥ 10:01                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ¯] +10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 10å€‹ï¼‰                        â”‚
â”‚      æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰                               â”‚
â”‚      2026å¹´2æœˆ23æ—¥ 15:30                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ã‚¢ã‚¤ã‚³ãƒ³ã®ä½¿ã„åˆ†ã‘

| stamp_method | ã‚¢ã‚¤ã‚³ãƒ³ | è‰² |
|-------------|---------|---|
| `qr_scan` | ğŸ¯ (CheckCircle2) | ç·‘ (primary) |
| `survey_reward` | ğŸ“ (FileText) | é’ (blue-500) |
| `manual_admin` | ğŸ‘¤ (User) | ã‚ªãƒ¬ãƒ³ã‚¸ (orange-500) |
| `import` | ğŸ“¦ (Package) | ã‚°ãƒ¬ãƒ¼ (gray-500) |

### 4.3 ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

**ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ï¼ˆå¤ªå­—ï¼‰:**
```typescript
`+${amount}å€‹ç²å¾—ï¼ˆåˆè¨ˆ ${stamp_number}å€‹ï¼‰`
```

**ã‚µãƒ–ãƒ©ã‚¤ãƒ³1ï¼ˆä¸­ã‚µã‚¤ã‚ºï¼‰:**
```typescript
getStampMethodLabel(stamp_method)
```

**ã‚µãƒ–ãƒ©ã‚¤ãƒ³2ï¼ˆå°ã‚µã‚¤ã‚ºã€ã‚°ãƒ¬ãƒ¼ï¼‰:**
```typescript
formatStampDate(visit_date)
```

---

## 5. å®Ÿè£…æ–¹é‡

### 5.1 ä¿®æ­£å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

1. **AdultStampPage.tsx** (ãƒ¡ã‚¤ãƒ³)
   - æ¥é™¢å±¥æ­´ã®è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã‚’å…¨é¢æ”¹ä¿®

2. **types/stamp.ts**
   - `stamp_method`ã« `'survey_reward'` ã‚’è¿½åŠ 

3. **lib/stamps.ts** (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
   - `getStampMethodLabel()` ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’è¿½åŠ 
   - `getStampMethodIcon()` ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’è¿½åŠ 

### 5.2 å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

#### Step 1: types/stamp.ts ã®ä¿®æ­£
```typescript
export interface StampHistoryRecord {
  id: string;
  user_id: string;
  visit_date: string;
  stamp_number: number;
  stamp_method: "qr_scan" | "manual_admin" | "import" | "survey_reward";  // â† è¿½åŠ 
  qr_code_id: string | null;
  amount: number | null;
  notes: string | null;
  created_at: string;
  updated_at: string;
}
```

#### Step 2: lib/stamps.ts ã«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’è¿½åŠ 
```typescript
/**
 * stamp_method ã‚’æ—¥æœ¬èªãƒ©ãƒ™ãƒ«ã«å¤‰æ›
 */
export function getStampMethodLabel(method: StampHistoryRecord['stamp_method']): string {
  switch (method) {
    case 'qr_scan':
      return 'æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰';
    case 'survey_reward':
      return 'ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬';
    case 'manual_admin':
      return 'ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œ';
    case 'import':
      return 'ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ';
    default:
      return 'ä¸æ˜';
  }
}

/**
 * stamp_method ã«å¿œã˜ãŸã‚¢ã‚¤ã‚³ãƒ³æƒ…å ±ã‚’è¿”ã™
 */
export function getStampMethodIcon(method: StampHistoryRecord['stamp_method']) {
  switch (method) {
    case 'qr_scan':
      return { icon: 'CheckCircle2', color: 'bg-primary/10 text-primary' };
    case 'survey_reward':
      return { icon: 'FileText', color: 'bg-blue-500/10 text-blue-500' };
    case 'manual_admin':
      return { icon: 'User', color: 'bg-orange-500/10 text-orange-500' };
    case 'import':
      return { icon: 'Package', color: 'bg-gray-500/10 text-gray-500' };
    default:
      return { icon: 'HelpCircle', color: 'bg-gray-500/10 text-gray-500' };
  }
}
```

#### Step 3: AdultStampPage.tsx ã®ä¿®æ­£
```typescript
// æ¥é™¢å±¥æ­´ãƒªã‚¹ãƒˆéƒ¨åˆ†ã‚’ä¿®æ­£
{stampHistory.map((record) => {
  const { fullStamps: recordStamps } = calculateStampDisplay(record.stamp_number);
  const methodLabel = getStampMethodLabel(record.stamp_method);
  const iconInfo = getStampMethodIcon(record.stamp_method);
  const amount = record.amount || 0;

  return (
    <li key={record.id} className="...">
      <div className={`flex h-10 w-10 items-center justify-center rounded-full ${iconInfo.color}`}>
        {/* ã‚¢ã‚¤ã‚³ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */}
      </div>
      <div className="flex-1">
        {/* ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³: +XXå€‹ç²å¾—ï¼ˆåˆè¨ˆ YYå€‹ï¼‰ */}
        <p className="text-sm font-bold text-gray-800">
          +{amount}å€‹ç²å¾—ï¼ˆåˆè¨ˆ {recordStamps}å€‹ï¼‰
        </p>
        {/* ã‚µãƒ–ãƒ©ã‚¤ãƒ³1: å–å¾—æ–¹æ³• */}
        <p className="text-xs text-gray-600">
          {methodLabel}
        </p>
        {/* ã‚µãƒ–ãƒ©ã‚¤ãƒ³2: æ—¥æ™‚ */}
        <p className="text-xs text-gray-500">
          {formatStampDate(record.visit_date)}
        </p>
      </div>
    </li>
  );
})}
```

### 5.3 ä¸‹ä½äº’æ›æ€§ã®è€ƒæ…®

**æ—¢å­˜ã®amount = nullã®å ´åˆ:**
```typescript
const amount = record.amount || 0;
```

**å¤ã„ãƒ‡ãƒ¼ã‚¿ã§stamp_methodãŒä¸æ˜ãªå ´åˆ:**
```typescript
const methodLabel = getStampMethodLabel(record.stamp_method || 'qr_scan');
```

---

## 6. å…·ä½“çš„ãªå®Ÿè£…ä¾‹

### 6.1 Beforeï¼ˆç¾åœ¨ï¼‰

```typescript
<li key={record.id}>
  <div className="...">
    <CheckCircle2 className="..." />
  </div>
  <div className="flex-1">
    <p className="text-sm font-medium text-gray-800">
      {visitNumber}å›ç›®ã®æ¥é™¢  {/* â† ã™ã¹ã¦ã€Œæ¥é™¢ã€ */}
      {record.stamp_method === 'manual_admin' && (
        <span className="...">( ã‚¹ã‚¿ãƒƒãƒ•ç·¨é›†)</span>
      )}
    </p>
    <p className="text-xs text-gray-500">
      {formatStampDate(record.visit_date)} â€¢ ã‚¹ã‚¿ãƒ³ãƒ— {recordStamps}å€‹
    </p>
  </div>
</li>
```

### 6.2 Afterï¼ˆæ–°ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰

```typescript
<li key={record.id}>
  <div className={`flex h-10 w-10 items-center justify-center rounded-full ${iconInfo.color}`}>
    {/* ã‚¢ã‚¤ã‚³ãƒ³ã‚’ stamp_method ã§åˆ‡ã‚Šæ›¿ãˆ */}
    {iconInfo.icon === 'CheckCircle2' && <CheckCircle2 className="h-5 w-5" />}
    {iconInfo.icon === 'FileText' && <FileText className="h-5 w-5" />}
    {iconInfo.icon === 'User' && <User className="h-5 w-5" />}
    {iconInfo.icon === 'Package' && <Package className="h-5 w-5" />}
  </div>
  <div className="flex-1">
    {/* ãƒ¡ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ */}
    <p className="text-sm font-bold text-gray-800">
      +{amount}å€‹ç²å¾—ï¼ˆåˆè¨ˆ {recordStamps}å€‹ï¼‰
    </p>
    {/* ã‚µãƒ–ãƒ©ã‚¤ãƒ³1: å–å¾—æ–¹æ³• */}
    <p className="text-xs font-medium text-gray-600">
      {methodLabel}
    </p>
    {/* ã‚µãƒ–ãƒ©ã‚¤ãƒ³2: æ—¥æ™‚ */}
    <p className="text-xs text-gray-500">
      {formatStampDate(record.visit_date)}
    </p>
  </div>
</li>
```

---

## 7. è¡¨ç¤ºä¾‹ï¼ˆå®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ï¼‰

### 7.1 QRã‚³ãƒ¼ãƒ‰æ¥é™¢
```
+10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 53å€‹ï¼‰
æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰
2026å¹´2æœˆ26æ—¥ 22:41
```

### 7.2 ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬
```
+30å€‹ç²å¾—ï¼ˆåˆè¨ˆ 50å€‹ï¼‰
ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬
2026å¹´2æœˆ26æ—¥ 22:12
```

### 7.3 ã‚¹ã‚¿ãƒƒãƒ•æ‰‹å‹•æ“ä½œ
```
+10å€‹èª¿æ•´ï¼ˆåˆè¨ˆ 20å€‹ï¼‰
ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œ
2026å¹´2æœˆ24æ—¥ 10:01
```

### 7.4 ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```
+10å€‹ç§»è¡Œï¼ˆåˆè¨ˆ 10å€‹ï¼‰
ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
2026å¹´2æœˆ20æ—¥ 00:00
```

---

## 8. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 8.1 é€šå¸¸ã®æ¥é™¢å±¥æ­´

**ãƒ‡ãƒ¼ã‚¿:**
```json
{
  "stamp_method": "qr_scan",
  "amount": 10,
  "stamp_number": 53,
  "visit_date": "2026-02-26T22:41:00+09:00"
}
```

**è¡¨ç¤º:**
```
+10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 53å€‹ï¼‰
æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰
2026å¹´2æœˆ26æ—¥ 22:41
```

### 8.2 ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå ±é…¬

**ãƒ‡ãƒ¼ã‚¿:**
```json
{
  "stamp_method": "survey_reward",
  "amount": 30,
  "stamp_number": 50,
  "visit_date": "2026-02-26T22:12:00+09:00",
  "notes": "ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”: satisfaction_2026Q1"
}
```

**è¡¨ç¤º:**
```
+30å€‹ç²å¾—ï¼ˆåˆè¨ˆ 50å€‹ï¼‰
ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬
2026å¹´2æœˆ26æ—¥ 22:12
```

### 8.3 ã‚¹ã‚¿ãƒƒãƒ•æ‰‹å‹•ç·¨é›†

**ãƒ‡ãƒ¼ã‚¿:**
```json
{
  "stamp_method": "manual_admin",
  "amount": 10,
  "stamp_number": 20,
  "visit_date": "2026-02-24T10:01:00+09:00",
  "notes": "ã‚¹ã‚¿ãƒƒãƒ•ã«ã‚ˆã‚‹æ‰‹å‹•èª¿æ•´"
}
```

**è¡¨ç¤º:**
```
+10å€‹èª¿æ•´ï¼ˆåˆè¨ˆ 20å€‹ï¼‰
ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œ
2026å¹´2æœˆ24æ—¥ 10:01
```

---

## 9. å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [x] types/stamp.ts ã« `'survey_reward'` ã‚’è¿½åŠ 
- [x] lib/stamps.ts ã« `getStampMethodLabel()` ã‚’è¿½åŠ 
- [x] lib/stamps.ts ã« `getStampMethodIcon()` ã‚’è¿½åŠ 
- [x] AdultStampPage.tsx ã®æ¥é™¢å±¥æ­´è¡¨ç¤ºã‚’ä¿®æ­£
- [x] ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ ï¼ˆFileText, User, Packageï¼‰
- [x] ã€Œè¨ªå•å›æ•°: Xå›ã€è¡¨ç¤ºã‚’å‰Šé™¤
- [x] amount = null ã®å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
- [ ] å‹•ä½œç¢ºèªï¼ˆQRã‚³ãƒ¼ãƒ‰ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã€ã‚¹ã‚¿ãƒƒãƒ•ç·¨é›†ï¼‰

---

## 10. å®Ÿè£…å®Œäº†çŠ¶æ³

**å®Ÿè£…æ—¥:** 2026-02-27

### 10.1 å®Ÿè£…å†…å®¹

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¿®æ­£
- âœ… [Doc/03_æ©Ÿèƒ½ä»•æ§˜æ›¸.md:33](../Doc/03_æ©Ÿèƒ½ä»•æ§˜æ›¸.md#L33) - stamp_method ã« 'import' ã¨ 'survey_reward' ã‚’è¿½åŠ 
- âœ… [Doc/05_Database_Schema.md:184](../Doc/05_Database_Schema.md#L184) - stamp_method ã« 'survey_reward' ã‚’è¿½åŠ 

#### å‹å®šç¾©ã®æ›´æ–°
- âœ… [types/stamp.ts:13](../types/stamp.ts#L13) - StampHistoryRecord ã« 'survey_reward' ã‚’è¿½åŠ 

#### ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®è¿½åŠ ï¼ˆlib/stamps.tsï¼‰
- âœ… `getStampMethodLabel()` - ã‚¹ã‚¿ãƒ³ãƒ—å–å¾—æ–¹æ³•ã®æ—¥æœ¬èªãƒ©ãƒ™ãƒ«å¤‰æ›é–¢æ•°
- âœ… `getStampMethodIcon()` - å–å¾—æ–¹æ³•ã«å¿œã˜ãŸlucide-reactã‚¢ã‚¤ã‚³ãƒ³åå–å¾—é–¢æ•°
- âœ… `STAMP_AMOUNTS.SURVEY_REWARD` - ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå ±é…¬ã®å®šæ•°ï¼ˆ30å€‹ï¼‰

#### UIå®Ÿè£…ã®å¤‰æ›´ï¼ˆAdultStampPage.tsxï¼‰
- âœ… è¡¨ç¤ºå½¢å¼ã‚’ "+XXå€‹ç²å¾—ï¼ˆåˆè¨ˆ YYå€‹ï¼‰" + å–å¾—æ–¹æ³•ãƒ©ãƒ™ãƒ« + æ—¥æ™‚ ã«å¤‰æ›´
- âœ… stamp_method ã«å¿œã˜ãŸã‚¢ã‚¤ã‚³ãƒ³ã¨è‰²ã®å·®åˆ¥åŒ–
- âœ… ã‚»ã‚¯ã‚·ãƒ§ãƒ³åã‚’ "æ¥é™¢å±¥æ­´" â†’ "ã‚¹ã‚¿ãƒ³ãƒ—ç²å¾—å±¥æ­´" ã«å¤‰æ›´

### 10.2 è¡¨ç¤ºä¾‹ï¼ˆå®Ÿè£…å¾Œï¼‰

```
[ğŸ¯] +10å€‹ç²å¾—ï¼ˆåˆè¨ˆ 53å€‹ï¼‰
     æ¥é™¢ï¼ˆQRã‚³ãƒ¼ãƒ‰ï¼‰
     2026å¹´2æœˆ26æ—¥ 22:41

[ğŸ“] +30å€‹ç²å¾—ï¼ˆåˆè¨ˆ 50å€‹ï¼‰
     ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆå›ç­”å ±é…¬
     2026å¹´2æœˆ26æ—¥ 22:12

[ğŸ‘¤] +5å€‹ç²å¾—ï¼ˆåˆè¨ˆ 45å€‹ï¼‰
     ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œ
     2026å¹´2æœˆ25æ—¥ 15:30
```

---

## 11. è¿½åŠ ã®æ”¹å–„ææ¡ˆï¼ˆå°†æ¥ï¼‰

### 11.1 æ¥é™¢å›æ•°ã®è¡¨ç¤ºæ–¹æ³•

ç¾åœ¨ã®ã€Œè¨ªå•å›æ•°: Xå›ã€ã¯å‰Šé™¤ã—ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã™ã‚‹ã“ã¨ã‚‚æ¤œè¨ã§ãã¾ã™ï¼š

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: æ¥é™¢ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆ**
```typescript
const visitCount = stampHistory.filter(r => r.stamp_method === 'qr_scan').length;
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: ãƒ˜ãƒƒãƒ€ãƒ¼ã«è¡¨ç¤º**
```
ã‚¹ã‚¿ãƒ³ãƒ—ç²å¾—å±¥æ­´ï¼ˆæ¥é™¢å›æ•°: 7å› / åˆè¨ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³: 8å›ï¼‰
```

### 11.2 ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½

```
[ ã™ã¹ã¦ ] [ æ¥é™¢ã®ã¿ ] [ ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ ] [ ã‚¹ã‚¿ãƒƒãƒ•æ“ä½œ ]
```

---

**æœ€çµ‚æ›´æ–°:** 2026-02-27
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** å®Ÿè£…å®Œäº†ï¼ˆå‹•ä½œç¢ºèªå¾…ã¡ï¼‰
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:** [Doc/60_ã‚¹ã‚¿ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ«.md](60_ã‚¹ã‚¿ãƒ³ãƒ—ãƒ«ãƒ¼ãƒ«.md)
